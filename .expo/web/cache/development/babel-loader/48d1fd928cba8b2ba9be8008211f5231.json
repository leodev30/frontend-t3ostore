{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"E:\\\\UET\\\\UI\\\\T3OFrontEnd\\\\T3O\\\\Screens\\\\Products\\\\ProductContainer.js\";\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { Container, Header, Icon, Item, Input, Text, Image, AnimatedView } from 'native-base';\nimport { SearchBar } from 'react-native-elements';\nimport baseURL from \"../../assets/common/baseUrl\";\nimport axios from 'axios';\nimport Footer from \"../../Shared/Footer\";\nimport ProductList from \"./ProductList\";\nimport SearchProduct from \"./SearchProduct\";\nimport Banner from \"../../Shared/Banner\";\nimport CategoryFilter from \"./CategoryFilter\";\nimport { useFocusEffect } from '@react-navigation/native';\nimport MarqueeText from 'react-native-marquee';\n\nvar _Dimensions$get = Dimensions.get(\"window\"),\n    height = _Dimensions$get.height;\n\nvar data = require(\"../../assets/data/products.json\");\n\nvar productCategories = require(\"../../assets/data/categories.json\");\n\nvar ProductContainer = function ProductContainer(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      products = _useState2[0],\n      setProducts = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      productsFiltered = _useState4[0],\n      setProductsFiltered = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      focus = _useState6[0],\n      setFocus = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      categories = _useState8[0],\n      setCategories = _useState8[1];\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      active = _useState10[0],\n      setActive = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      initialState = _useState12[0],\n      setInitialState = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      productsCtg = _useState14[0],\n      setProductsCtg = _useState14[1];\n\n  var _useState15 = useState(true),\n      _useState16 = _slicedToArray(_useState15, 2),\n      loading = _useState16[0],\n      setLoading = _useState16[1];\n\n  useFocusEffect(useCallback(function () {\n    setFocus(false);\n    setActive(-1);\n    axios.get(baseURL + \"/products/\").then(function (respone) {\n      setProducts(respone.data);\n      setProductsFiltered(respone.data);\n      setProductsCtg(respone.data);\n      setInitialState(respone.data);\n      setLoading(false);\n    }).catch(function (error) {\n      console.log('Api call error');\n    });\n    axios.get(baseURL + \"/categories/\").then(function (res) {\n      setCategories(res.data);\n    }).catch(function (error) {\n      console.log('Api call error');\n    });\n    return function () {\n      setProducts([]);\n      setProductsFiltered([]);\n      setFocus();\n      setCategories([]);\n      setActive();\n      setInitialState();\n    };\n  }, []));\n\n  var searchProduct = function searchProduct(text) {\n    setProductsFiltered(products.filter(function (i) {\n      return i.name.toLowerCase().includes(text.toLowerCase());\n    }));\n  };\n\n  var openList = function openList() {\n    setFocus(true);\n  };\n\n  var onBlur = function onBlur() {\n    setFocus(false);\n  };\n\n  var changeCtg = function changeCtg(ctg) {\n    {\n      ctg === \"all\" ? [setProductsCtg(initialState), setActive(true)] : [setProductsCtg(products.filter(function (i) {\n        return i.category._id === ctg;\n      }), setActive(true))];\n    }\n  };\n\n  return React.createElement(React.Fragment, null, loading == false ? React.createElement(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  }, React.createElement(ScrollView, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }, React.createElement(SearchBar, {\n    showLoading: false,\n    platform: Platform.OS,\n    inputStyle: {\n      backgroundColor: '#EEEEEE',\n      marginLeft: 12\n    },\n    containerStyle: {\n      backgroundColor: 'white'\n    },\n    style: styles.searchBar,\n    searchIcon: {\n      size: 30\n    },\n    placeholder: \"Search\",\n    onFocus: openList,\n    onChangeText: function onChangeText(text) {\n      return searchProduct(text);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }\n  }), focus == true ? React.createElement(Icon, {\n    onPress: onBlur,\n    name: \"ios-close\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 15\n    }\n  }) : null, focus == true ? React.createElement(SearchProduct, {\n    navigation: props.navigation,\n    productsFiltered: productsFiltered,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }) : React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 15\n    }\n  }, React.createElement(Banner, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 17\n    }\n  })), React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 15\n    }\n  }, React.createElement(CategoryFilter, {\n    categories: categories,\n    categoryFilter: changeCtg,\n    productsCtg: productsCtg,\n    active: active,\n    setActive: setActive,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 15\n    }\n  })), React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 15\n    }\n  }, React.createElement(MarqueeText, {\n    style: {\n      paddingTop: 5,\n      paddingBottom: 5,\n      fontSize: 22\n    },\n    duration: 100000,\n    marqueeOnStart: true,\n    loop: true,\n    marqueeDelay: 2000,\n    marqueeResetDelay: 1000,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 15\n    }\n  }, \"S\\u1EA3n ph\\u1EA9m ch\\xEDnh h\\xE3ng T3O Store\")), productsCtg.length > 0 ? React.createElement(View, {\n    style: styles.listContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 15\n    }\n  }, productsCtg.map(function (item) {\n    return React.createElement(ProductList, {\n      navigation: props.navigation,\n      key: item.name,\n      item: item,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 27\n      }\n    });\n  })) : React.createElement(View, {\n    style: (styles.center, {\n      height: '40%'\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 19\n    }\n  }, \"No product found\")), React.createElement(View, {\n    style: styles.listContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 15\n    }\n  })), React.createElement(Footer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 9\n    }\n  })))) : React.createElement(Container, {\n    style: [styles.center, {\n      backgroundColor: \"#f2f2f2\"\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 7\n    }\n  }, React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: \"red\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 9\n    }\n  })));\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flexWrap: 'wrap',\n    backgroundColor: 'gainsboro'\n  },\n  listContainer: {\n    width: '100%',\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    flexWrap: 'wrap',\n    backgroundColor: 'gainsboro'\n  },\n  searchBar: {\n    paddingLeft: 10\n  },\n  center: {\n    justifyContent: 'center',\n    alignContent: 'center'\n  }\n});\nexport default ProductContainer;","map":{"version":3,"sources":["E:/UET/UI/T3OFrontEnd/T3O/Screens/Products/ProductContainer.js"],"names":["React","useState","useEffect","useCallback","Container","Header","Icon","Item","Input","Text","Image","AnimatedView","SearchBar","baseURL","axios","Footer","ProductList","SearchProduct","Banner","CategoryFilter","useFocusEffect","MarqueeText","Dimensions","get","height","data","require","productCategories","ProductContainer","props","products","setProducts","productsFiltered","setProductsFiltered","focus","setFocus","categories","setCategories","active","setActive","initialState","setInitialState","productsCtg","setProductsCtg","loading","setLoading","then","respone","catch","error","console","log","res","searchProduct","text","filter","i","name","toLowerCase","includes","openList","onBlur","changeCtg","ctg","category","_id","Platform","OS","backgroundColor","marginLeft","styles","searchBar","size","navigation","paddingTop","paddingBottom","fontSize","length","listContainer","map","item","center","StyleSheet","create","container","flexWrap","width","flex","flexDirection","alignItems","paddingLeft","justifyContent","alignContent"],"mappings":"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","sourcesContent":["import React, { useState, useEffect,  useCallback } from 'react';\r\nimport { \r\n        Alert,\r\n        ScrollView, \r\n        View, \r\n        StyleSheet, \r\n        ActivityIndicator, \r\n        FlatList, \r\n        TouchableOpacity, \r\n        SafeAreaView, \r\n        TouchableHighlight,\r\n        Dimensions \r\n        } from 'react-native';\r\nimport { Container, Header, Icon, Item, Input, Text, Image, AnimatedView} from 'native-base';\r\nimport { SearchBar } from 'react-native-elements';\r\n\r\nimport baseURL from \"../../assets/common/baseUrl\";\r\nimport axios from 'axios';\r\n\r\nimport Footer from '../../Shared/Footer'\r\nimport ProductList from './ProductList';\r\nimport SearchProduct from './SearchProduct';\r\nimport Banner from '../../Shared/Banner';\r\nimport CategoryFilter from './CategoryFilter';\r\nimport { useFocusEffect } from '@react-navigation/native'\r\nimport MarqueeText from 'react-native-marquee';\r\n// import HSNZ from \"react-native-marquee-scroll\";\r\n\r\n\r\nvar { height } = Dimensions.get(\"window\")\r\nconst data = require('../../assets/data/products.json');\r\nconst productCategories = require('../../assets/data/categories.json');\r\n\r\n\r\nconst ProductContainer = (props) => {\r\n\r\n  const [products, setProducts ] = useState([]);\r\n  const [productsFiltered, setProductsFiltered] = useState([]);\r\n  const [focus, setFocus] = useState();\r\n  const [categories, setCategories] = useState([]);\r\n  const [active, setActive] = useState();\r\n  const [initialState, setInitialState] = useState([]);\r\n  const [productsCtg, setProductsCtg] = useState([]);\r\n  const [loading, setLoading] = useState(true)\r\n\r\n   \r\n\r\n  useFocusEffect((\r\n      useCallback(\r\n        () => {\r\n          setFocus(false);\r\n          setActive(-1);\r\n          \r\n          // Products\r\n          axios\r\n            .get(`${baseURL}/products/`)\r\n            .then((respone) => {\r\n              setProducts(respone.data);\r\n              setProductsFiltered(respone.data);\r\n              setProductsCtg(respone.data);\r\n              setInitialState(respone.data);\r\n              setLoading(false)\r\n            })\r\n            .catch((error) => {\r\n              console.log('Api call error')\r\n            })\r\n      \r\n          // Categories\r\n          axios\r\n            .get(`${baseURL}/categories/`)\r\n            .then((res) => {\r\n              setCategories(res.data)\r\n            })\r\n            .catch((error) => {\r\n              console.log('Api call error')\r\n            })\r\n\r\n            \r\n      \r\n          return () => {\r\n            setProducts([]);\r\n            setProductsFiltered([]);\r\n            setFocus();\r\n            setCategories([]);\r\n            setActive();\r\n            setInitialState();\r\n          };\r\n        },\r\n        [],\r\n      )\r\n    ))\r\n  \r\n  const searchProduct = (text) => {\r\n      setProductsFiltered(\r\n        products.filter((i) => i.name.toLowerCase().includes(text.toLowerCase()))\r\n      );\r\n    };\r\n\r\n  const openList = () => {\r\n    setFocus(true);\r\n  }\r\n\r\n  const onBlur = () => {\r\n    setFocus(false);\r\n  }\r\n  // const _onFocus = () => {\r\n  \r\n  // }\r\n  // Categories\r\n  const changeCtg = (ctg) => {\r\n    {\r\n      ctg === \"all\"\r\n        ? [setProductsCtg(initialState), setActive(true)]\r\n        : [\r\n            setProductsCtg(\r\n              products.filter((i) => i.category._id === ctg),\r\n              setActive(true)\r\n            ),\r\n          ];\r\n    }\r\n  };\r\n\r\n \r\n  return (\r\n    <>\r\n    {loading == false ? (\r\n      <Container>\r\n      <ScrollView>\r\n      <View>\r\n        {/* <SafeAreaView style={styles.header_safe_area}>\r\n          <View style={styles.header}>\r\n            <View style={styles.header_inner}>\r\n              <Image\r\n                  style={styles.image}\r\n                  source={require(\"../../assets/logo.png\")}\r\n                  resizeMode=\"contain\"\r\n              />\r\n              <Text style={styles.title}>\r\n                  T3O Store\r\n              </Text>\r\n            </View>\r\n            <TouchableHighlight\r\n              activeOpacity={1}\r\n              underlayColor={\"#ccd0d5\"}\r\n              onPress={this._onFocus}\r\n              style={styles.search_icon_box}\r\n            >\r\n              <Icon name=\"search\" size={22} color=\"#000000\"  />\r\n            </TouchableHighlight>\r\n            <AnimatedView\r\n              style={[ styles.input_box, {transform: [{translateX: this._input_box_translate_x}] }]}\r\n            ></AnimatedView>\r\n          </View>\r\n        </SafeAreaView> */}\r\n        {/* older code */}\r\n        {/* <Header searchBar rounded>\r\n          <Item>\r\n            <Icon name=\"ios-search\"/> */}\r\n            <SearchBar\r\n              showLoading={false}\r\n              platform={Platform.OS}\r\n              // clearIcon={true}\r\n              // value={search}\r\n              inputStyle={{backgroundColor: '#EEEEEE', marginLeft: 12}}\r\n              containerStyle={{backgroundColor: 'white'}}\r\n              // placeholderTextColor={'#g5g5g5'}\r\n              style={styles.searchBar}\r\n              searchIcon={{ size: 30 }}\r\n              placeholder=\"Search\"\r\n              onFocus={openList}\r\n              onChangeText={(text) => searchProduct(text)}\r\n            />\r\n            {focus == true ? (\r\n              <Icon onPress={onBlur} name=\"ios-close\" />\r\n            ) : null}\r\n          {/* </Item>\r\n        </Header> */}\r\n        {focus == true ? (\r\n          <SearchProduct\r\n            navigation={props.navigation}\r\n            productsFiltered={productsFiltered} \r\n            />\r\n        ) : (\r\n            <View >\r\n              <View>\r\n                <Banner />\r\n              </View>\r\n              \r\n              <View>\r\n              <CategoryFilter\r\n                categories={categories}\r\n                categoryFilter={changeCtg}\r\n                productsCtg={productsCtg}\r\n                active={active}\r\n                setActive={setActive}\r\n              />\r\n              </View>\r\n              <View>\r\n              <MarqueeText\r\n                style={{ paddingTop: 5, paddingBottom: 5, fontSize: 22 }}\r\n                duration={100000}\r\n                marqueeOnStart\r\n                loop\r\n                marqueeDelay={2000}\r\n                marqueeResetDelay={1000}\r\n              >\r\n              Sản phẩm chính hãng T3O Store\r\n              </MarqueeText>   \r\n              {/* <HSNZ\r\n                loop={-1}\r\n                direction={\"ltr\"}\r\n                autoPlay={true}\r\n                speed={20}\r\n                onEnd={this.end}\r\n              >\r\n                \r\n              </HSNZ> */}\r\n              </View>\r\n              {productsCtg.length > 0 ? (\r\n              <View style={styles.listContainer}>\r\n                  {productsCtg.map((item) => {\r\n                      return(\r\n                          <ProductList\r\n                              navigation={props.navigation}\r\n                              key={item.name}\r\n                              item={item}\r\n                          />\r\n                      )\r\n                  })}\r\n                </View>\r\n              ) : (\r\n                <View style={styles.center, { height: '40%'}}>\r\n                  <Text>No product found</Text>\r\n                </View>\r\n              )}\r\n              <View style={styles.listContainer}>\r\n              </View>\r\n            </View>\r\n        )}\r\n        <Footer />\r\n      </View>\r\n      </ScrollView>\r\n      </Container>\r\n   ):(\r\n     //Loading\r\n      <Container style={[styles.center, { backgroundColor: \"#f2f2f2\"}]}>\r\n        <ActivityIndicator size=\"large\" color=\"red\" />\r\n      </Container> \r\n  )}\r\n  </>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flexWrap: 'wrap',\r\n    backgroundColor: 'gainsboro',\r\n  },\r\n  listContainer: {\r\n    width: '100%',\r\n    flex: 1,\r\n    flexDirection: 'row',\r\n    alignItems: 'flex-start',\r\n    flexWrap: 'wrap',\r\n    backgroundColor: 'gainsboro'\r\n  },\r\n  searchBar: {\r\n    paddingLeft: 10,\r\n  },\r\n  center: {\r\n    justifyContent: 'center',\r\n    alignContent: 'center'\r\n  }\r\n  // header_safe_area: {\r\n  //   zIndex: 1000\r\n  // },\r\n  // header: {\r\n  //   height: 50,\r\n  //   paddingHorizontal: 16\r\n  // },\r\n  // header_inner: {\r\n  //   flex: 1,\r\n  //   overflow: 'hidden',\r\n  //   flexDirection: 'row',\r\n  //   justifyContent: 'space-between',\r\n  //   alignItems: 'center',\r\n  //   position: 'relative'\r\n  // },\r\n  // image: {\r\n  //   height: 35,\r\n  //   width: 50,\r\n  // },\r\n  // title: {\r\n  //   fontWeight: \"bold\",\r\n  //   fontSize: 22,\r\n  // },\r\n  // search_icon_box: {\r\n  //   width: 40,\r\n  //   height: 40,\r\n  //   borderRadius: 40,\r\n  //   backgroundColor: '#e4e6eb',\r\n  //   flexDirection: 'row',\r\n  //   justifyContent: 'center',\r\n  //   alignItems: 'center'\r\n  // }\r\n})\r\nexport default ProductContainer;"]},"metadata":{},"sourceType":"module"}